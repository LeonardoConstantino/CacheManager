# üöÄ Cache Manager

Uma biblioteca JavaScript avan√ßada para gerenciamento de cache em mem√≥ria e persistente, com suporte para TTL (Time To Live), LRU (Least Recently Used) e m√∫ltiplas estrat√©gias de persist√™ncia.

## ‚ú® Caracter√≠sticas Principais

- **Cache em Mem√≥ria**: Sistema de cache r√°pido e eficiente com TTL configur√°vel
- **Persist√™ncia Flex√≠vel**: Suporte para localStorage (browser) e sistema de arquivos (Node.js)
- **Estrat√©gia LRU**: Remo√ß√£o autom√°tica dos itens menos utilizados quando o limite √© atingido
- **Auto-Save**: Salvamento autom√°tico em intervalos configur√°veis
- **Deep Clone**: Clonagem profunda de objetos para evitar muta√ß√µes indesejadas
- **Logging Avan√ßado**: Sistema de logs com n√≠veis e formata√ß√£o colorida
- **ReportLogger** Sistema de monitoramento humanizado integrado, mais detalhes na proxima se√ß√£o
- **TypeScript Ready**: Defini√ß√µes de tipos inclu√≠das
- **Multi-ambiente**: Funciona tanto no browser quanto no Node.js

## üì¶ Instala√ß√£o

Para instalar e rodar o projeto localmente, siga os passos abaixo:

1. Clone o reposit√≥rio:

```bash
git clone https://github.com/LeonardoConstantino/CacheManager.git
```

2. Navegue at√© o diret√≥rio do projeto:

```bash
cd CacheManager
```

3. Rode a demonstra√ß√£o:

```bash
npm run demo
```

4. Rode os teste:

```bash
npm run test
```
## Tecnologias Utilizadas
- **JavaScript** para l√≥gica.
- **Git** para controle de vers√£o.
- **GitHub** para hospedagem e colabora√ß√£o.
- **VS Code** para desenvolvimento.
<p>
  <a href="https://skillicons.dev">
    <img src="https://skillicons.dev/icons?i=js,git,github,vscode" />
  </a>
</p>
**Sem depend√™ncias externas**, apenas JavaScript puro.

## üöÄ Uso R√°pido

### Criando um Cache Simples

```javascript
const { createNewCacheManager } = require('./CacheManager/index.js');

// Criar uma nova inst√¢ncia isolada do gerenciador
const cacheManager = createNewCacheManager();

// Criar cache com preset 'balanced' e TTL personalizado
const userCache = cacheManager.createCache('users', 'balanced', {
  defaultTTL: 300000, // 5 minutos em millisegundos
});

// Armazenar dados com TTL autom√°tico
userCache.set('user_123', {
  name: 'Jo√£o',
  email: 'joao@email.com',
  role: 'admin',
});

// Recuperar dados (null se expirado)
const user = userCache.get('user_123');
console.log(user);
// Output: { name: 'Jo√£o', email: 'joao@email.com', role: 'admin' }

// Verificar se existe antes de usar
if (userCache.has('user_123')) {
  console.log('Usu√°rio encontrado no cache');
}
```

### Usando Singleton Global

```javascript
const { getGlobalCacheManager } = require('./CacheManager/index.js');

// Obter inst√¢ncia global compartilhada
const globalCache = getGlobalCacheManager();

// Criar cache de API com alta performance
const apiCache = globalCache.createCache(
  'api_responses',
  'performance-optimized',
  {
    defaultTTL: 600000, // 10 minutos
    maxSize: 10000, // Override do preset
  }
);

// Cache de configura√ß√µes que persiste
const configCache = globalCache.createCache('app_config', 'persistent', {
  persistence: {
    storageKey: 'app_settings',
    autoSaveInterval: 30000, // Auto-save a cada 30s
  },
});

// Mesmo cache em qualquer lugar da aplica√ß√£o
const sameCache = getGlobalCacheManager();
console.log(globalCache === sameCache); // true
```

### Cache Persistente com Auto-Save

```javascript
const { createNewCacheManager } = require('./CacheManager/index.js');

const cacheManager = createNewCacheManager();

// Cache de sess√µes com persist√™ncia autom√°tica
const sessionCache = cacheManager.createCache(
  'user_sessions',
  'persistent-performance',
  {
    defaultTTL: 3600000, // 1 hora
    persistence: {
      storageKey: 'active_sessions',
      autoSaveInterval: 15000, // Salva a cada 15s
    },
  }
);

// Dados s√£o automaticamente persistidos
sessionCache.set('session_abc123', {
  userId: 456,
  role: 'user',
  loginTime: Date.now(),
  expires: Date.now() + 3600000,
});

// For√ßa salvamento imediato (ignora debounce)
await sessionCache.save(true);

// Carrega dados salvos na inicializa√ß√£o
await sessionCache.load();
```

### Store Persistente Simples

```javascript
const {
  SimplePersistentStore,
} = require('./src/persistence/SimplePersistentStore.js');

// Store dedicado para configura√ß√µes da aplica√ß√£o
const appStore = new SimplePersistentStore('app_preferences');

// Configura√ß√µes com TTL diferenciados
appStore.set('theme', 'dark', 86400000); // 24 horas
appStore.set('language', 'pt-BR', 604800000); // 7 dias
appStore.set('notifications', true); // Sem TTL (permanente)

// Recupera√ß√£o com fallbacks
const theme = appStore.get('theme') || 'light';
const lang = appStore.get('language') || 'en-US';
const notifications = appStore.get('notifications') ?? false;

// Verificar se dados existem antes de usar
if (appStore.has('user_preferences')) {
  const prefs = appStore.get('user_preferences');
  console.log('Prefer√™ncias carregadas:', prefs);
}

// Remover dados espec√≠ficos
appStore.delete('theme');

// Limpar dados expirados manualmente
appStore.cleanup();
```

## üîß Configura√ß√µes Avan√ßadas

### Presets de Cache Otimizados

```javascript
const { createNewCacheManager } = require('./CacheManager/index.js');
const cacheManager = createNewCacheManager();

// Cache para aplica√ß√µes m√≥veis (economia de mem√≥ria)
const mobileCache = cacheManager.createCache(
  'mobile_data',
  'memory-optimized',
  {
    maxSize: 50, // Limite baixo
    defaultTTL: 1800000, // 30 minutos
  }
);

// Cache para APIs de alta frequ√™ncia
const apiCache = cacheManager.createCache(
  'api_cache',
  'performance-optimized',
  {
    maxSize: 50000, // Alto volume
    defaultTTL: 300000, // 5 minutos
    enableLRU: false, // M√°xima performance
  }
);

// Cache balanceado para web apps
const webCache = cacheManager.createCache('web_data', 'balanced', {
  defaultTTL: 900000, // 15 minutos
  maxSize: 2000, // Capacidade m√©dia
});

// Cache persistente para dados cr√≠ticos
const criticalCache = cacheManager.createCache('critical', 'persistent', {
  enableAutoCleanup: false, // So apaga com limpeza manual
  persistence: {
    storageKey: 'critical_app_data',
    autoSaveInterval: 5000, // Salva a cada 5s
  },
});
```

### Gerenciamento Avan√ßado de TTL

```javascript
const cache = cacheManager.createCache('advanced_ttl', 'balanced');

// TTL espec√≠fico por item
cache.set('short_lived', 'dados tempor√°rios', 60000); // 1 minuto
cache.set('medium_lived', 'dados normais', 1800000); // 30 minutos
cache.set('long_lived', 'dados duradouros', 86400000); // 24 horas

// Verificar TTL restante
const remainingTTL = cache.getTTL('medium_lived');
console.log(`Expira em: ${remainingTTL}ms`);

// Atualizar TTL de item existente
cache.updateTTL('short_lived', 300000); // Extende para 5 minutos
```

### Monitoramento e Estat√≠sticas

```javascript
const cache = cacheManager.createCache('monitored', 'balanced');

// Adicionar alguns dados para demonstra√ß√£o
cache.set('item1', 'data1');
cache.set('item2', 'data2');
cache.set('item3', 'data3');

// Estat√≠sticas b√°sicas do cache
const stats = cache.getStats();
console.log('Estat√≠sticas do Cache:', {
  name: stats.name, // Nome do cache
  size: stats.size, // Tamanho atual
  maxSize: stats.maxSize, // Tamanho m√°ximo
  defaultTTL: stats.defaultTTL, // TTL padr√£o
  hitRate: stats.hitRate, // Taxa de acertos
  hits: stats.hits, // Hits
  misses: stats.misses, // Erros
  sets: stats.sets, // Set
  evictions: stats.evictions, // Remo√ß√µes
  cleanups: stats.cleanups, // Limpezas
  objectsInCache: stats.objectsInCache, // Objetos no cache
  clonesInCache: stats.clonesInCache, // Clones no cache
});

// Estat√≠sticas de mem√≥ria
const memStats = cache.getMemoryStats();
console.log('Uso de Mem√≥ria:', {
  totalSize: memStats.totalSize, // Tamanho total
  totalEntries: memStats.totalEntries, // Entradas totais
  objectEntries: memStats.objectEntries, // Entradas de objetos
  primitiveEntries: memStats.primitiveEntries, // Entradas primitivas
  estimatedSize: memStats.estimatedSize, // Tamanho estimado
  averageEntrySize: memStats.averageEntrySize, // Tamanho m√©dio
});

// Informa√ß√µes gerais
console.log('Tamanho atual:', cache.size());
console.log('Chaves ativas:', cache.keys());
```

### Limpeza e Manuten√ß√£o

```javascript
const cache = cacheManager.createCache('maintenance', 'balanced');

// Dados de exemplo
cache.set('temp1', 'data', 1000); // Expira em 1s
cache.set('temp2', 'data', 2000); // Expira em 2s
cache.set('perm1', 'data', 3000); // Expira em 3s

// Aguardar expira√ß√£o
setTimeout(() => {
  console.log('Antes da limpeza:', cache.size()); // 3 itens

  // Limpeza manual de itens expirados
  const removedCount = cache.cleanup();
  console.log(`Removidos: ${removedCount} itens expirados`);
  console.log('Ap√≥s limpeza:', cache.size()); // 1 item

  // Limpar tudo
  cache.clear();
  console.log('Ap√≥s clear:', cache.size()); // 0 itens

  // Destruir cache e liberar recursos
  cache.destroy();
}, 3500);
```

### Exemplo Completo: Sistema de Cache Multi-Camada

```javascript
const { getGlobalCacheManager } = require('./src/core/index.js');

class ApplicationCache {
  constructor() {
    this.manager = getGlobalCacheManager();
    this.initializeCaches();
  }

  initializeCaches() {
    // Cache de sess√£o (tempor√°rio)
    this.sessionCache = this.manager.createCache(
      'sessions',
      'memory-optimized',
      {
        defaultTTL: 1800000, // 30 minutos
        maxSize: 1000,
      }
    );

    // Cache de dados de usu√°rio (balanceado)
    this.userCache = this.manager.createCache('users', 'balanced', {
      defaultTTL: 3600000, // 1 hora
    });

    // Cache de configura√ß√µes (persistente)
    this.configCache = this.manager.createCache('config', 'persistent', {
      defaultTTL: 86400000, // 24 horas
      persistence: {
        storageKey: 'app_configuration',
        autoSaveInterval: 60000, // 1 minuto
      },
    });
  }

  // M√©todos de conveni√™ncia
  async cacheUserSession(sessionId, userData) {
    this.sessionCache.set(sessionId, userData);
    return userData;
  }

  getUserSession(sessionId) {
    return this.sessionCache.get(sessionId);
  }

  async cacheUserProfile(userId, profile) {
    this.userCache.set(`user_${userId}`, profile);
    return profile;
  }

  getUserProfile(userId) {
    return this.userCache.get(`user_${userId}`);
  }

  async setConfig(key, value, persistent = true) {
    if (persistent) {
      this.configCache.set(key, value);
      await this.configCache.save(true); // For√ßa salvamento
    } else {
      this.sessionCache.set(`config_${key}`, value);
    }
  }

  getConfig(key, defaultValue = null) {
    return (
      this.configCache.get(key) ||
      this.sessionCache.get(`config_${key}`) ||
      defaultValue
    );
  }

  // Estat√≠sticas consolidadas
  getSystemStats() {
    return {
      sessions: this.sessionCache.getStats(),
      users: this.userCache.getStats(),
      config: this.configCache.getStats(),
    };
  }

  // Limpeza geral
  cleanup() {
    const sessionCleaned = this.sessionCache.cleanup();
    const userCleaned = this.userCache.cleanup();
    const configCleaned = this.configCache.cleanup();

    return {
      sessionsRemoved: sessionCleaned,
      usersRemoved: userCleaned,
      configRemoved: configCleaned,
    };
  }
}

// Uso da classe
const appCache = new ApplicationCache();

// Exemplo de uso
appCache.cacheUserSession('sess_123', { userId: 456, role: 'admin' });
appCache.cacheUserProfile(456, { name: 'Jo√£o', email: 'joao@email.com' });
appCache.setConfig('theme', 'dark', true);

console.log(appCache.getUserSession('sess_123'));
console.log(appCache.getUserProfile(456));
console.log(appCache.getConfig('theme'));
```

### Pr√©-configura√ß√µes dispon√≠veis

| Tipo de Cache                       | Descri√ß√£o                                                 | Casos de Uso Ideais                                    |
| ----------------------------------- | --------------------------------------------------------- | ------------------------------------------------------ |
| `memory-optimized`                  | Prioriza economia de mem√≥ria com otimiza√ß√µes inteligentes | Aplica√ß√µes com recursos limitados, mobile apps         |
| `performance-optimized`             | M√°ximo desempenho com uso liberado de mem√≥ria             | Aplica√ß√µes cr√≠ticas, servidores com RAM abundante      |
| `balanced`                          | Equil√≠brio otimizado entre performance e uso de mem√≥ria   | Aplica√ß√µes web gerais, APIs de m√©dio porte             |
| `persistent`                        | Cache persistente com foco em conserva√ß√£o de dados        | Dados cr√≠ticos que n√£o podem ser perdidos              |
| `persistent-performance`            | Cache persistente otimizado para alta performance         | Sistemas enterprise com dados cr√≠ticos                 |
| `memory-optimized-with-persistence` | Economia de mem√≥ria mantendo persist√™ncia                 | Aplica√ß√µes m√≥veis que precisam salvar estado           |
| `minimal-critical-persistence`      | Configura√ß√£o m√≠nima para dados cr√≠ticos                   | Sistemas embarcados, IoT, aplica√ß√µes de baixo overhead |

#### üìä Comparativo de Performance

| Configura√ß√£o                        | Uso de Mem√≥ria | Velocidade | Persist√™ncia | Ideal Para                               |
| ----------------------------------- | -------------- | ---------- | ------------ | ---------------------------------------- |
| `memory-optimized`                  | üü¢ Baixo       | üü° M√©dio   | ‚ùå N√£o       | Apps m√≥veis, recursos limitados          |
| `performance-optimized`             | üî¥ Alto        | üü¢ M√°ximo  | ‚ùå N√£o       | Servidores, aplica√ß√µes cr√≠ticas          |
| `balanced`                          | üü° M√©dio       | üü° M√©dio   | ‚ùå N√£o       | Web apps gerais, APIs                    |
| `persistent`                        | üü¢ Baixo       | üü° M√©dio   | ‚úÖ Sim       | Dados importantes, baixo volume          |
| `persistent-performance`            | üî¥ Alto        | üü¢ Alto    | ‚úÖ Sim       | Enterprise, dados cr√≠ticos + performance |
| `memory-optimized-with-persistence` | üü¢ Baixo       | üü° M√©dio   | ‚úÖ Sim       | Mobile com estado persistente            |
| `minimal-critical-persistence`      | üü¢ Baixo       | üü¢ Alto    | ‚úÖ Manual    | IoT, sistemas embarcados                 |

### Configura√ß√£o Personalizada

```javascript
const customCache = cacheManager.createCache('custom', {
  defaultTTL: 3600, // TTL padr√£o de 1 hora
  enableLRU: true, // Ativar LRU (Least Recently Used)
  enableAutoCleanup: true, // Ativar limpeza autom√°tica
  enableWeakOptimization: true, // Ativar otimiza√ß√£o com WeakMap()
  maxSize: 100, // Tamanho m√°ximo do cache
  cleanupFrequency: 10000, // Intervalo de limpeza autom√°tica (em milissegundos)
  freezeOption: freezeOptions.DEEP, // Op√ß√£o de congelamento (deep | shallow | none)
  persistence: { // Configura√ß√µes de persist√™ncia
    enabled: true, // Ativar persist√™ncia
    storageKey: 'cache_data', // Chave de armazenamento
    autoSaveInterval: 10000, // Intervalo de salvamento autom√°tico
  },
});
```

## üìä Estat√≠sticas e Monitoramento

```javascript
// Estat√≠sticas de um cache espec√≠fico
const stats = userCache.getStats();
console.log(stats);
/*
{
  name: string;
  size: number;
  maxSize: number;
  defaultTTL: number;
  hitRate: string;
  hits: number;
  misses: number;
  sets: number;
  evictions: number;
  cleanups: number;
  objectsInCache: number;
  clonesInCache: number;
}
*/

// Uso de mem√≥ria de um cache espec√≠fico
const memoryUsage = userCache.getMemoryStats();
console.log(memoryUsage);
/*
{
  totalSize: number;
  totalEntries: number;
  objectEntries: number;
  primitiveEntries: number;
  estimatedSize: string;
  averageEntrySize: number;
}
*/

// Estat√≠sticas globais
const globalStats = cacheManager.getGlobalStats();
console.log(globalStats);
/*
{
  totalCaches: number;
  caches: {
    [cacheName: string]: {
      name: string;
      size: number;
      maxSize: number;
      defaultTTL: number;
      hitRate: string;
      hits: number;
      misses: number;
      sets: number;
      evictions: number;
      cleanups: number;
      objectsInCache: number;
      clonesInCache: number;
    }
  }
}
*/

// Uso de mem√≥ria consolidado de todos os caches
const globalMemoryUsage = cacheManager.getConsolidateMemoryStats();
console.log(globalMemoryUsage);
/*
{
  totalCaches: number;
  consolidate: {
    totalSize: number;
    totalEntries: number;
    objectEntries: number;
    primitiveEntries: number;
    averageEntrySize: number;
    estimatedSize: string;
  }
}
*/
```

## üìä ReportLogger

O **ReportLogger** √© um sistema de monitoramento humanizado integrado ao CacheManager que gera relat√≥rios autom√°ticos sobre estat√≠sticas do sistema, incluindo cache, mem√≥ria e filas de tarefas.

### ‚ú® Funcionalidades

- **Integra√ß√£o Transparente**: Iniciado automaticamente junto com o CacheManager
- **Monitoramento Autom√°tico**: Gera relat√≥rios peri√≥dicos com estat√≠sticas detalhadas
- **Interface Humanizada**: Apresenta dados de forma clara com emojis e formata√ß√£o visual
- **M√∫ltiplas M√©tricas**: Monitora cache, uso de mem√≥ria e status de filas
- **Configura√ß√£o Flex√≠vel**: Permite personalizar intervalos, m√≥dulos monitorados e apar√™ncia
- **Gest√£o de Recursos**: Controle completo do ciclo de vida com m√©todos `stop()` e `destroy()`

### üöÄ Uso Integrado (Recomendado)

```javascript
const { getGlobalCacheManager, createNewCacheManager, TIME_INTERVALS } = require('./CacheManager');

// CacheManager global com relat√≥rios autom√°ticos
const cacheManager = getGlobalCacheManager({
  report: true,                           // Habilita relat√≥rios
  interval: TIME_INTERVALS.THIRTY_MINUTES, // A cada 30 minutos
  enableCache: true,                      // Monitorar cache
  enableMemory: true,                     // Monitorar mem√≥ria
  enableQueue: true,                      // Monitorar filas
  useColors: true,                        // Usar cores na sa√≠da
  loggerModule: 'MY_APP_CACHE'           // Nome personalizado
});

// Inst√¢ncia isolada com monitoramento
const isolatedCache = createNewCacheManager({
  report: true,
  interval: TIME_INTERVALS.FIFTEEN_MINUTES,
  saveLogs: true                          // Salvar logs em arquivo
});

// Uso normal - relat√≥rios s√£o autom√°ticos
const userCache = cacheManager.createCache('users', 300000);
userCache.set('user:123', userData);
```

```javascript
// Constantes de tempo dispon√≠veis
const { TIME_INTERVALS } = require('./CacheManager');
// TIME_INTERVALS.ONE_HOUR = 3600000
// TIME_INTERVALS.THIRTY_MINUTES = 1800000
// TIME_INTERVALS.FIFTEEN_MINUTES = 900000

// Configura√ß√£o personalizada
const cacheManager = getGlobalCacheManager({
  report: true,
  interval: TIME_INTERVALS.FIFTEEN_MINUTES,
  enableMemory: false,              // Desabilitar relat√≥rio de mem√≥ria
  loggerModule: 'MY_CUSTOM_CACHE',  // Nome personalizado
  saveLogs: true                    // Salvar em arquivo
});
```

### üéØ Integra√ß√£o Autom√°tica

O ReportLogger √© automaticamente gerenciado pelo CacheManager:

- **Global**: Um reporter √© criado com prefixo `GLOBAL_` para a inst√¢ncia singleton
- **Isolado**: Cada inst√¢ncia isolada recebe um reporter com prefixo `ISOLATED_`
- **Lifecycle**: O reporter √© destru√≠do automaticamente quando o CacheManager √© destru√≠do
- **TaskQueue**: Utiliza a fila global de tarefas para agendamento eficiente


```javascript
// Desabilitar relat√≥rios (n√£o cria reporter)
const silentCache = getGlobalCacheManager({ report: false });
```

## üõ†Ô∏è API Completa

### CacheManager

| M√©todo                                             | Descri√ß√£o                                   | retorno                  |
| -------------------------------------------------- | ------------------------------------------- | ------------------------ |
| `createCache(name, options \| Preset, overrides?)` | Cria um novo cache                          | `Cache`                  |
| `removeCache(name)`                                | Remove um cache                             | `void`                   |
| `getCache(name)`                                   | Retorna um cache                            | `Cache \| null`          |
| `listCaches()`                                     | Lista todos os caches                       | `string[]`               |
| `getStats()`                                       | Retorna estat√≠sticas globais                | `CacheStats`             |
| `cleanupAll()`                                     | Limpa todos os caches                       | `void`                   |
| `setCleanupFrequency()`                            | Define a frequ√™ncia de limpeza              | `void`                   |
| `startAutoCleanup()`                               | Inicia a limpeza autom√°tica                 | `void`                   |
| `stopAutoCleanup()`                                | Para a limpeza autom√°tica                   | `void`                   |
| `getConsolidateMemoryStats()`                      | Retorna estat√≠sticas de mem√≥ria consolidada | `ConsolidateMemoryStats` |
| `destroy()`                                        | Destr√≥i o gerenciador de cache              | `void`                   |

### MyCache

| M√©todo                  | Descri√ß√£o                         | Retorno            |
| ----------------------- | --------------------------------- | ------------------ |
| `set(key, value, ttl?)` | Armazena um item no cache         | `void`             |
| `get(key)`              | Recupera um item do cache         | `any \| undefined` |
| `has(key)`              | Verifica se uma chave existe      | `boolean`          |
| `delete(key)`           | Remove um item do cache           | `boolean`          |
| `cleanup()`             | Remove itens expirados            | `number`           |
| `clear()`               | Limpa todo o cache                | `void`             |
| `size()`                | Retorna o tamanho atual do cache  | `number`           |
| `keys()`                | Retorna todas as chaves v√°lidas   | `string[]`         |
| `getTTL(key)`           | Retorna o TTL restante de um item | `number \| null`   |
| `updateTTL(key, ttl)`   | Atualiza o TTL de um item         | `boolean`          |
| `getStats()`            | Retorna estat√≠sticas do cache     | `CacheStats`       |
| `getMemoryStats()`      | Retorna estat√≠sticas de mem√≥ria   | `MemoryStats`      |
| `destroy()`             | Destr√≥i o cache e libera recursos | `void`             |

### PersistentCache

> **Herda todos os m√©todos de `MyCache`** + m√©todos espec√≠ficos:

| M√©todo                  | Descri√ß√£o                                                                     | Retorno            |
| ----------------------- | ----------------------------------------------------------------------------- | ------------------ |
| `save(ignoreDebounce?)` | Salva o cache manualmente. Se `ignoreDebounce` for `true`, for√ßa o salvamento | `Promise<void>`    |
| `load()`                | Carrega dados previamente salvos                                              | `Promise<void>`    |
| `clearPersistence()`    | Remove dados persistidos do storage                                           | `Promise<void>`    |
| `hasPersistentData()`   | Verifica se existem dados salvos                                              | `Promise<boolean>` |

## üéØ Casos de Uso

### 1. Cache de API

```javascript
const apiCache = cacheManager.createCache(
  'api_responses',
  'persistent-performance'
);

async function fetchUserData(userId) {
  const cacheKey = `user_${userId}`;

  // Tentar buscar no cache primeiro
  let userData = apiCache.get(cacheKey);

  if (!userData) {
    // Se n√£o estiver no cache, buscar da API
    userData = await fetch(`/api/users/${userId}`).then((r) => r.json());

    // Armazenar no cache por 10 minutos
    apiCache.set(cacheKey, userData, 600000);
  }

  return userData;
}
```

### 2. Gerenciamento de Sess√µes

```javascript
const sessionCache = cacheManager.createCache('user_sessions', 'persistent');

function createSession(userId) {
  const sessionId = Math.random().toString(36);
  const sessionData = {
    userId,
    createdAt: Date.now(),
    lastAccess: Date.now(),
  };

  // Sess√£o expira em 2 horas
  sessionCache.set(sessionId, sessionData, 7200000);
  return sessionId;
}

function validateSession(sessionId) {
  const session = sessionCache.get(sessionId);
  if (session) {
    // Atualizar √∫ltimo acesso
    session.lastAccess = Date.now();
    sessionCache.set(sessionId, session, 7200000);
    return session;
  }
  return null;
}
```

### 3. Configura√ß√µes da Aplica√ß√£o

```javascript
const configStore = new SimplePersistentStore('app_config');

// Configura√ß√µes que n√£o expiram
configStore.set('app_version', '1.2.3');
configStore.set('api_endpoint', 'https://api.example.com');

// Configura√ß√µes tempor√°rias
configStore.set('maintenance_mode', true, 3600000); // 1 hora
```

## üîç Sistema de Logging

```javascript
import { log, LogLevel, setLogLevel, logTimer } from './logger.js';

// Configurar n√≠vel de log
setLogLevel(LogLevel.DEBUG);

// Logs b√°sicos
log(LogLevel.INFO, 'Cache inicializado com sucesso');
log(LogLevel.ERROR, 'Erro ao conectar com storage', error);

// Medir performance de fun√ß√µes
const result = await logTimer(
  () => cache.cleanup(),
  'Cache Cleanup',
  LogLevel.INFO
);
```

## ‚öôÔ∏è Utilit√°rios

```javascript
import { timeToMilliseconds, randomString, clamp } from './utils.js';

// Converter tempo para milissegundos
const ttl = timeToMilliseconds('1:30:00'); // 1 hora e 30 minutos

// Gerar string aleat√≥ria
const cacheKey = randomString(); // "1703123456789_abc123def"

// Limitar valores
const size = clamp(userInput, 1, 10000, 100); // Entre 1 e 10000, padr√£o 100
```

## üèóÔ∏è Arquitetura

<details>
<summary><h3>Vis√£o Geral do Sistema</h3></summary>

```
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ     CacheManager        ‚îÇ
                    ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
                    ‚îÇ ‚îÇ  Multi-Cache Pool   ‚îÇ ‚îÇ
                    ‚îÇ ‚îÇ  Global Settings    ‚îÇ ‚îÇ
                    ‚îÇ ‚îÇ  Instance Manager   ‚îÇ ‚îÇ
                    ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                             ‚îÇ
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ                    ‚îÇ                    ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   MyCache    ‚îÇ    ‚îÇ PersistentCache ‚îÇ    ‚îÇ Custom Cache  ‚îÇ
‚îÇ              ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ   Types       ‚îÇ
‚îÇ ‚Ä¢ TTL/LRU    ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚î§ ‚Ä¢ Auto-save     ‚îÇ    ‚îÇ               ‚îÇ
‚îÇ ‚Ä¢ Deep clone ‚îÇ    ‚îÇ ‚Ä¢ Load/Save     ‚îÇ    ‚îÇ ‚Ä¢ Extensible  ‚îÇ
‚îÇ ‚Ä¢ Stats      ‚îÇ    ‚îÇ ‚Ä¢ Storage API   ‚îÇ    ‚îÇ ‚Ä¢ Pluggable   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
        ‚îÇ                    ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ    Core Engine       ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
               ‚îÇ
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   Storage Layer      ‚îÇ
    ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
    ‚îÇ ‚îÇ   TTL Heap      ‚îÇ  ‚îÇ
    ‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ
    ‚îÇ ‚îÇ ‚îÇ MinHeap     ‚îÇ ‚îÇ  ‚îÇ
    ‚îÇ ‚îÇ ‚îÇ Priority Q  ‚îÇ ‚îÇ  ‚îÇ
    ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚îÇ
    ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
    ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
    ‚îÇ ‚îÇ   LRU Policy    ‚îÇ  ‚îÇ
    ‚îÇ ‚îÇ ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ  ‚îÇ
    ‚îÇ ‚îÇ ‚îÇ DoublyLinked‚îÇ ‚îÇ  ‚îÇ
    ‚îÇ ‚îÇ ‚îÇ List        ‚îÇ ‚îÇ  ‚îÇ
    ‚îÇ ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ  ‚îÇ
    ‚îÇ ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Fluxo de Dados

<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" type="text/css"?>

<svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="0 0 835.3125 908.75" style="max-width: 100%; max-height: 100%; background: transparent;" class="flowchart" xmlns="http://www.w3.org/2000/svg" width="100%" id="mermaid-image-editor"><style>#mermaid-image-editor{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-image-editor .error-icon{fill:#552222;}#mermaid-image-editor .error-text{fill:#552222;stroke:#552222;}#mermaid-image-editor .edge-thickness-normal{stroke-width:1px;}#mermaid-image-editor .edge-thickness-thick{stroke-width:3.5px;}#mermaid-image-editor .edge-pattern-solid{stroke-dasharray:0;}#mermaid-image-editor .edge-thickness-invisible{stroke-width:0;fill:none;}#mermaid-image-editor .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-image-editor .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-image-editor .marker{fill:#333333;stroke:#333333;}#mermaid-image-editor .marker.cross{stroke:#333333;}#mermaid-image-editor svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-image-editor p{margin:0;}#mermaid-image-editor .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-image-editor .cluster-label text{fill:#333;}#mermaid-image-editor .cluster-label span{color:#333;}#mermaid-image-editor .cluster-label span p{background-color:transparent;}#mermaid-image-editor .label text,#mermaid-image-editor span{fill:#333;color:#333;}#mermaid-image-editor .node rect,#mermaid-image-editor .node circle,#mermaid-image-editor .node ellipse,#mermaid-image-editor .node polygon,#mermaid-image-editor .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-image-editor .rough-node .label text,#mermaid-image-editor .node .label text,#mermaid-image-editor .image-shape .label,#mermaid-image-editor .icon-shape .label{text-anchor:middle;}#mermaid-image-editor .node .katex path{fill:#000;stroke:#000;stroke-width:1px;}#mermaid-image-editor .rough-node .label,#mermaid-image-editor .node .label,#mermaid-image-editor .image-shape .label,#mermaid-image-editor .icon-shape .label{text-align:center;}#mermaid-image-editor .node.clickable{cursor:pointer;}#mermaid-image-editor .root .anchor path{fill:#333333!important;stroke-width:0;stroke:#333333;}#mermaid-image-editor .arrowheadPath{fill:#333333;}#mermaid-image-editor .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-image-editor .flowchart-link{stroke:#333333;fill:none;}#mermaid-image-editor .edgeLabel{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-image-editor .edgeLabel p{background-color:rgba(232,232,232, 0.8);}#mermaid-image-editor .edgeLabel rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-image-editor .labelBkg{background-color:rgba(232, 232, 232, 0.5);}#mermaid-image-editor .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-image-editor .cluster text{fill:#333;}#mermaid-image-editor .cluster span{color:#333;}#mermaid-image-editor div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-image-editor .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-image-editor rect.text{fill:none;stroke-width:0;}#mermaid-image-editor .icon-shape,#mermaid-image-editor .image-shape{background-color:rgba(232,232,232, 0.8);text-align:center;}#mermaid-image-editor .icon-shape p,#mermaid-image-editor .image-shape p{background-color:rgba(232,232,232, 0.8);padding:2px;}#mermaid-image-editor .icon-shape rect,#mermaid-image-editor .image-shape rect{opacity:0.5;background-color:rgba(232,232,232, 0.8);fill:rgba(232,232,232, 0.8);}#mermaid-image-editor :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-image-editor_flowchart-v2-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="8" markerWidth="8" markerUnits="userSpaceOnUse" refY="5" refX="4.5" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-image-editor_flowchart-v2-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-image-editor_flowchart-v2-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart-v2" id="mermaid-image-editor_flowchart-v2-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-image-editor_flowchart-v2-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart-v2" id="mermaid-image-editor_flowchart-v2-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"></g><g class="edgePaths"><path marker-end="url(#mermaid-image-editor_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_A_B_0" d="M524.609,62L524.609,66.167C524.609,70.333,524.609,78.667,524.609,86.333C524.609,94,524.609,101,524.609,104.5L524.609,108"></path><path marker-end="url(#mermaid-image-editor_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_B_C_1" d="M524.609,166L524.609,170.167C524.609,174.333,524.609,182.667,524.68,190.417C524.75,198.167,524.89,205.334,524.961,208.917L525.031,212.501"></path><path marker-end="url(#mermaid-image-editor_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_D_2" d="M477.812,309.952L448.933,323.918C420.054,337.885,362.297,365.817,333.418,390.45C304.539,415.083,304.539,436.417,304.539,455.75C304.539,475.083,304.539,492.417,305.214,504.595C305.89,516.774,307.241,523.798,307.916,527.31L308.591,530.822"></path><path marker-end="url(#mermaid-image-editor_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_C_E_3" d="M570.906,311.453L596.535,325.17C622.164,338.886,673.422,366.318,699.051,385.534C724.68,404.75,724.68,415.75,724.68,421.25L724.68,426.75"></path><path marker-end="url(#mermaid-image-editor_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_F_4" d="M253.234,576.529L227.501,582.732C201.768,588.936,150.302,601.343,124.569,611.046C98.836,620.75,98.836,627.75,98.836,631.25L98.836,634.75"></path><path marker-end="url(#mermaid-image-editor_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_G_5" d="M314.539,588.75L314.539,592.917C314.539,597.083,314.539,605.417,314.539,613.083C314.539,620.75,314.539,627.75,314.539,631.25L314.539,634.75"></path><path marker-end="url(#mermaid-image-editor_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_D_H_6" d="M375.844,576.765L401.012,582.929C426.18,589.093,476.516,601.422,501.684,611.086C526.852,620.75,526.852,627.75,526.852,631.25L526.852,634.75"></path><path marker-end="url(#mermaid-image-editor_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_I_7" d="M729.872,484.75L730.673,488.917C731.475,493.083,733.077,501.417,733.878,509.083C734.68,516.75,734.68,523.75,734.68,527.25L734.68,530.75"></path><path marker-end="url(#mermaid-image-editor_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_E_D_8" d="M670.724,484.75L662.398,488.917C654.071,493.083,637.419,501.417,588.929,512.403C540.44,523.39,460.113,537.03,419.95,543.85L379.787,550.67"></path><path marker-end="url(#mermaid-image-editor_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_F_J_9" d="M98.836,692.75L98.836,696.917C98.836,701.083,98.836,709.417,98.836,717.083C98.836,724.75,98.836,731.75,98.836,735.25L98.836,738.75"></path><path marker-end="url(#mermaid-image-editor_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_G_K_10" d="M314.539,692.75L314.539,696.917C314.539,701.083,314.539,709.417,314.539,717.083C314.539,724.75,314.539,731.75,314.539,735.25L314.539,738.75"></path><path marker-end="url(#mermaid-image-editor_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_I_L_11" d="M734.68,588.75L734.68,592.917C734.68,597.083,734.68,605.417,734.68,613.083C734.68,620.75,734.68,627.75,734.68,631.25L734.68,634.75"></path><path marker-end="url(#mermaid-image-editor_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_J_M_12" d="M98.836,796.75L98.836,800.917C98.836,805.083,98.836,813.417,98.836,821.083C98.836,828.75,98.836,835.75,98.836,839.25L98.836,842.75"></path><path marker-end="url(#mermaid-image-editor_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_K_N_13" d="M314.539,796.75L314.539,800.917C314.539,805.083,314.539,813.417,314.539,821.083C314.539,828.75,314.539,835.75,314.539,839.25L314.539,842.75"></path><path marker-end="url(#mermaid-image-editor_flowchart-v2-pointEnd)" style="" class="edge-thickness-normal edge-pattern-solid edge-thickness-normal edge-pattern-solid flowchart-link" id="L_L_O_14" d="M734.68,692.75L734.68,696.917C734.68,701.083,734.68,709.417,734.68,717.083C734.68,724.75,734.68,731.75,734.68,735.25L734.68,738.75"></path></g><g class="edgeLabels"><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g transform="translate(304.5390625, 457.75)" class="edgeLabel"><g transform="translate(-46.5078125, -12)" class="label"><foreignObject height="24" width="93.015625"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>Memory Only</p></span></div></foreignObject></g></g><g transform="translate(724.6796875, 393.75)" class="edgeLabel"><g transform="translate(-59.4921875, -12)" class="label"><foreignObject height="24" width="118.984375"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"><p>With Persistence</p></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div class="labelBkg" xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(524.609375, 35)" id="flowchart-A-207" class="node default"><rect height="54" width="141.109375" y="-27" x="-70.5546875" style="" class="basic label-container"></rect><g transform="translate(-40.5546875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="81.109375"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Application</p></span></div></foreignObject></g></g><g transform="translate(524.609375, 139)" id="flowchart-B-208" class="node default"><rect height="54" width="163.25" y="-27" x="-81.625" style="" class="basic label-container"></rect><g transform="translate(-51.625, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="103.25"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>CacheManager</p></span></div></foreignObject></g></g><g transform="translate(524.609375, 286.375)" id="flowchart-C-210" class="node default"><polygon transform="translate(-70.375,70.375)" class="label-container" points="70.375,0 140.75,-70.375 70.375,-140.75 0,-70.375"></polygon><g transform="translate(-43.375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="86.75"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Cache Type?</p></span></div></foreignObject></g></g><g transform="translate(314.5390625, 561.75)" id="flowchart-D-212" class="node default"><rect height="54" width="122.609375" y="-27" x="-61.3046875" style="" class="basic label-container"></rect><g transform="translate(-31.3046875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="62.609375"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>MyCache</p></span></div></foreignObject></g></g><g transform="translate(724.6796875, 457.75)" id="flowchart-E-214" class="node default"><rect height="54" width="174.15625" y="-27" x="-87.078125" style="" class="basic label-container"></rect><g transform="translate(-57.078125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="114.15625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>PersistentCache</p></span></div></foreignObject></g></g><g transform="translate(98.8359375, 665.75)" id="flowchart-F-216" class="node default"><rect height="54" width="181.671875" y="-27" x="-90.8359375" style="" class="basic label-container"></rect><g transform="translate(-60.8359375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="121.671875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>TTL Management</p></span></div></foreignObject></g></g><g transform="translate(314.5390625, 665.75)" id="flowchart-G-218" class="node default"><rect height="54" width="149.734375" y="-27" x="-74.8671875" style="" class="basic label-container"></rect><g transform="translate(-44.8671875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="89.734375"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>LRU Eviction</p></span></div></foreignObject></g></g><g transform="translate(526.8515625, 665.75)" id="flowchart-H-220" class="node default"><rect height="54" width="174.890625" y="-27" x="-87.4453125" style="" class="basic label-container"></rect><g transform="translate(-57.4453125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="114.890625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Memory Storage</p></span></div></foreignObject></g></g><g transform="translate(734.6796875, 561.75)" id="flowchart-I-222" class="node default"><rect height="54" width="185.265625" y="-27" x="-92.6328125" style="" class="basic label-container"></rect><g transform="translate(-62.6328125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="125.265625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Persistence Layer</p></span></div></foreignObject></g></g><g transform="translate(98.8359375, 769.75)" id="flowchart-J-226" class="node default"><rect height="54" width="127.421875" y="-27" x="-63.7109375" style="" class="basic label-container"></rect><g transform="translate(-33.7109375, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="67.421875"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>TTL Heap</p></span></div></foreignObject></g></g><g transform="translate(314.5390625, 769.75)" id="flowchart-K-228" class="node default"><rect height="54" width="190.90625" y="-27" x="-95.453125" style="" class="basic label-container"></rect><g transform="translate(-65.453125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="130.90625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Doubly Linked List</p></span></div></foreignObject></g></g><g transform="translate(734.6796875, 665.75)" id="flowchart-L-230" class="node default"><rect height="54" width="140.765625" y="-27" x="-70.3828125" style="" class="basic label-container"></rect><g transform="translate(-40.3828125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="80.765625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Storage API</p></span></div></foreignObject></g></g><g transform="translate(98.8359375, 873.75)" id="flowchart-M-232" class="node default"><rect height="54" width="155.75" y="-27" x="-77.875" style="" class="basic label-container"></rect><g transform="translate(-47.875, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="95.75"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Auto Cleanup</p></span></div></foreignObject></g></g><g transform="translate(314.5390625, 873.75)" id="flowchart-N-234" class="node default"><rect height="54" width="155.0625" y="-27" x="-77.53125" style="" class="basic label-container"></rect><g transform="translate(-47.53125, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="95.0625"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Auto Eviction</p></span></div></foreignObject></g></g><g transform="translate(734.6796875, 769.75)" id="flowchart-O-236" class="node default"><rect height="54" width="173" y="-27" x="-86.5" style="" class="basic label-container"></rect><g transform="translate(-56.5, -12)" style="" class="label"><rect></rect><foreignObject height="24" width="113"><div xmlns="http://www.w3.org/1999/xhtml" style="display: table-cell; white-space: nowrap; line-height: 1.5; max-width: 200px; text-align: center;"><span class="nodeLabel"><p>Auto Save/Load</p></span></div></foreignObject></g></g></g></g></g></svg>

### M√≥dulos e Responsabilidades

#### üéØ **Core (N√∫cleo)**

| M√≥dulo                  | Responsabilidade                      | Depend√™ncias       |
| ----------------------- | ------------------------------------- | ------------------ |
| `Cache.js`              | Implementa√ß√£o base do cache, TTL, LRU | TTLHeap, LRUPolicy |
| `CacheManager.js`       | Gerenciamento de m√∫ltiplas inst√¢ncias | Cache, Utils       |
| `CacheConfiguration.js` | Presets e configura√ß√µes padr√£o        | Types              |

#### üîÑ **Eviction (Despejo)**

| M√≥dulo         | Responsabilidade             | Algoritmo               |
| -------------- | ---------------------------- | ----------------------- |
| `LRUPolicy.js` | Pol√≠tica Least Recently Used | Doubly Linked List O(1) |

#### ‚è∞ **Expiration (Expira√ß√£o)**

| M√≥dulo       | Responsabilidade                | Estrutura        |
| ------------ | ------------------------------- | ---------------- |
| `TTLHeap.js` | Gerenciamento de TTL autom√°tico | MinHeap O(log n) |

#### üíæ **Persistence (Persist√™ncia)**

| M√≥dulo                     | Responsabilidade                  | Storage Type                                                              |
| -------------------------- | --------------------------------- | ------------------------------------------------------------------------- |
| `PersistentCache.js`       | Cache com persist√™ncia autom√°tica | No NodeJS, salva em um arquivo JSON. No navegador, salva no localStorage. |
| `SimplePersistentStore.js` | Abstra√ß√£o de storage              | Storage API                                                               |
| `MinimalPersistence.js`    | Persist√™ncia b√°sica               | Key-Value                                                                 |

#### üìã **Task Queue (Fila de Tarefas)**

| M√≥dulo             | Responsabilidade            | Pattern           |
| ------------------ | --------------------------- | ----------------- |
| `TaskQueue.js`     | Fila de tarefas ass√≠ncronas | Producer-Consumer |
| `ScheduledTask.js` | Tarefas agendadas           | Cron-like         |

#### üõ†Ô∏è **Utils (Utilit√°rios)**

| M√≥dulo        | Responsabilidade        | Fun√ß√£o                 |
| ------------- | ----------------------- | ---------------------- |
| `debounce.js` | Controle de frequ√™ncia  | Rate Limiting          |
| `Timers.js`   | Gerenciamento de timers | Cleanup Automation     |
| `utils.js`    | Fun√ß√µes auxiliares      | Deep Clone, Validation |

### Caracter√≠sticas T√©cnicas

#### ‚ö° **Performance**

- **Acesso**: O(1) para get/set b√°sicos
- **TTL**: O(log n) para gerenciamento de expira√ß√£o
- **LRU**: O(1) para atualiza√ß√£o de uso
- **Cleanup**: O(k) onde k = itens expirados

#### üß† **Memory Management**

- **Deep Cloning**: Previne vazamentos de refer√™ncia
- **Weak References**: Otimiza√ß√£o autom√°tica de mem√≥ria
- **Auto Cleanup**: Remo√ß√£o proativa de itens expirados
- **Size Limits**: Controle de crescimento ilimitado

#### üîí **Data Integrity**

- **Immutability**: Objetos congelados opcionalmente
- **Validation**: Verifica√ß√£o de tipos e limites
- **Atomic Operations**: Opera√ß√µes transacionais
- **Error Recovery**: Fallbacks para falhas de storage

</details>

### Estrutura de Arquivos

```
üì¶ CacheManager/
‚îú‚îÄ‚îÄ üìÇ src/
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ core/               # Classes principais
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Cache.js           # Implementa√ß√£o base
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CacheManager.js    # Gerenciador principal
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CacheConfiguration.js # Presets e configs
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ eviction/           # Pol√≠ticas de despejo
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ LRUPolicy.js       # Least Recently Used
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ expiration/         # Gerenciamento de TTL
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ TTLHeap.js         # Heap para expira√ß√£o
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ persistence/        # Camada de persist√™ncia
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PersistentCache.js      # Cache persistente
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SimplePersistentStore.js # Storage abstrato
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ MinimalPersistence.js   # Persist√™ncia b√°sica
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ taskQueue/          # Sistema de tarefas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TaskQueue.js       # Fila principal
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ScheduledTask.js   # Tarefas agendadas
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ types/              # Defini√ß√µes de tipos
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cache.types.js     # Tipos do cache
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ log.types.js       # Tipos de logging
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ taskQueue.types.js # Tipos da fila
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ utils/              # Utilit√°rios
‚îÇ       ‚îú‚îÄ‚îÄ debounce.js        # Rate limiting
‚îÇ       ‚îú‚îÄ‚îÄ Timers.js          # Gerenciamento de timers
‚îÇ       ‚îî‚îÄ‚îÄ utils.js           # Fun√ß√µes auxiliares
‚îÇ
‚îú‚îÄ‚îÄ üìÇ tests/                  # Testes automatizados
‚îú‚îÄ‚îÄ üìÇ examples/               # Exemplos de uso
‚îú‚îÄ‚îÄ üìú index.js                # Entry point
‚îî‚îÄ‚îÄ üìú README.md               # Documenta√ß√£o
```

## ü§ù Contribui√ß√£o

1. Fork este reposit√≥rio
2. Crie uma branch para sua feature (`git checkout -b feature/nova-feature`)
3. Commit suas mudan√ßas (`git commit -am 'Adiciona nova feature'`)
4. Push para a branch (`git push origin feature/nova-feature`)
5. Abra um Pull Request

## üìù Licen√ßa

Este projeto est√° licenciado under a Licen√ßa MIT - veja o arquivo [LICENSE](LICENSE) para detalhes.

## üöß Roadmap

- [ ] Suporte para Redis como backend
- [ ] Compress√£o autom√°tica de dados grandes
- [ ] M√©tricas avan√ßadas e dashboard
- [ ] Suporte para cache distribu√≠do
- [ ] Plugin system para extensibilidade

## ‚ùì FAQ

**P: O cache funciona em ambientes sem localStorage?**
R: Sim, o sistema detecta automaticamente o ambiente e usa a estrat√©gia de persist√™ncia adequada.

**P: Como posso migrar dados entre vers√µes?**
R: O sistema mant√©m compatibilidade com vers√µes anteriores atrav√©s de versionamento interno dos dados salvos.

**P: Qual √© o overhead de performance?**
R: O sistema √© otimizado para alta performance, com opera√ß√µes O(1) para get/set e O(log n) para limpeza de TTL.

---

<p align="center">Desenvolvido com ‚ù§Ô∏è para a comunidade JavaScript.</p>
